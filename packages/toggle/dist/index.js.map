{"version":3,"sources":["../src/index.ts","../src/lib/BaseTogglePlugin.ts","../src/lib/queries/someToggle.ts"],"sourcesContent":["/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from './lib/index';\n","import { type PluginConfig, createTSlatePlugin, KEYS } from 'platejs';\n\nexport type BaseToggleConfig = PluginConfig<\n  'toggle',\n  {\n    openIds?: Set<string>;\n  },\n  {\n    toggle: {\n      toggleIds: (ids: string[], force?: boolean | null) => void;\n    };\n  },\n  {},\n  {\n    isOpen?: (toggleId: string) => boolean;\n    someClosed?: (toggleIds: string[]) => boolean;\n  }\n>;\n\nexport const BaseTogglePlugin = createTSlatePlugin<BaseToggleConfig>({\n  key: KEYS.toggle,\n  node: { isElement: true },\n  options: {\n    openIds: new Set(),\n  },\n})\n  .extendSelectors<BaseToggleConfig['selectors']>(({ getOptions }) => ({\n    isOpen: (toggleId) => {\n      return getOptions().openIds!.has(toggleId);\n    },\n    someClosed: (toggleIds) => {\n      const { openIds } = getOptions();\n\n      return toggleIds.some((id) => !openIds!.has(id));\n    },\n  }))\n  .extendApi<BaseToggleConfig['api']['toggle']>(({ setOptions }) => ({\n    toggleIds: (ids, force = null) => {\n      setOptions((draft) => {\n        ids.forEach((id) => {\n          const isCurrentlyOpen = draft.openIds!.has(id);\n          const newIsOpen = force === null ? !isCurrentlyOpen : force;\n\n          if (newIsOpen) {\n            draft.openIds!.add(id);\n          } else {\n            draft.openIds!.delete(id);\n          }\n        });\n      });\n    },\n  }));\n","import { type SlateEditor, KEYS } from 'platejs';\n\nexport const someToggle = (editor: SlateEditor) => {\n  return (\n    !!editor.selection &&\n    editor.api.some({\n      match: (n) => n.type === KEYS.toggle,\n    })\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,qBAA4D;AAmBrD,IAAM,uBAAmB,mCAAqC;AAAA,EACnE,KAAK,oBAAK;AAAA,EACV,MAAM,EAAE,WAAW,KAAK;AAAA,EACxB,SAAS;AAAA,IACP,SAAS,oBAAI,IAAI;AAAA,EACnB;AACF,CAAC,EACE,gBAA+C,CAAC,EAAE,WAAW,OAAO;AAAA,EACnE,QAAQ,CAAC,aAAa;AACpB,WAAO,WAAW,EAAE,QAAS,IAAI,QAAQ;AAAA,EAC3C;AAAA,EACA,YAAY,CAAC,cAAc;AACzB,UAAM,EAAE,QAAQ,IAAI,WAAW;AAE/B,WAAO,UAAU,KAAK,CAAC,OAAO,CAAC,QAAS,IAAI,EAAE,CAAC;AAAA,EACjD;AACF,EAAE,EACD,UAA6C,CAAC,EAAE,WAAW,OAAO;AAAA,EACjE,WAAW,CAAC,KAAK,QAAQ,SAAS;AAChC,eAAW,CAAC,UAAU;AACpB,UAAI,QAAQ,CAAC,OAAO;AAClB,cAAM,kBAAkB,MAAM,QAAS,IAAI,EAAE;AAC7C,cAAM,YAAY,UAAU,OAAO,CAAC,kBAAkB;AAEtD,YAAI,WAAW;AACb,gBAAM,QAAS,IAAI,EAAE;AAAA,QACvB,OAAO;AACL,gBAAM,QAAS,OAAO,EAAE;AAAA,QAC1B;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AACF,EAAE;;;ACnDJ,IAAAA,kBAAuC;AAEhC,IAAM,aAAa,CAAC,WAAwB;AACjD,SACE,CAAC,CAAC,OAAO,aACT,OAAO,IAAI,KAAK;AAAA,IACd,OAAO,CAAC,MAAM,EAAE,SAAS,qBAAK;AAAA,EAChC,CAAC;AAEL;","names":["import_platejs"]}