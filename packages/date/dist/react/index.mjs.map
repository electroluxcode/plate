{"version":3,"sources":["../../src/react/DatePlugin.tsx","../../src/lib/BaseDatePlugin.ts","../../src/lib/transforms/insertDate.ts"],"sourcesContent":["import { toPlatePlugin } from 'platejs/react';\n\nimport { BaseDatePlugin } from '../lib';\n\nexport const DatePlugin = toPlatePlugin(BaseDatePlugin);\n","import { bindFirst, createSlatePlugin, KEYS } from 'platejs';\n\nimport { insertDate } from './transforms';\n\nexport const BaseDatePlugin = createSlatePlugin({\n  key: KEYS.date,\n  node: {\n    isElement: true,\n    isInline: true,\n    isSelectable: false,\n    isVoid: true,\n  },\n}).extendEditorTransforms(({ editor }) => ({\n  insert: {\n    date: bindFirst(insertDate, editor),\n  },\n}));\n","import type { InsertNodesOptions, SlateEditor, TDateElement } from 'platejs';\n\nimport { KEYS } from 'platejs';\n\nexport const insertDate = (\n  editor: SlateEditor,\n  { date, ...options }: { date?: string } & InsertNodesOptions = {}\n) => {\n  editor.tf.insertNodes<TDateElement | { text: string }>(\n    [\n      {\n        children: [{ text: '' }],\n        date: date ?? new Date().toDateString(),\n        type: editor.getType(KEYS.date),\n      },\n      // FIXME: for not losing the editor focus\n      {\n        text: ' ',\n      },\n    ],\n    options as any\n  );\n};\n"],"mappings":";AAAA,SAAS,qBAAqB;;;ACA9B,SAAS,WAAW,mBAAmB,QAAAA,aAAY;;;ACEnD,SAAS,YAAY;AAEd,IAAM,aAAa,CACxB,QACA,EAAE,MAAM,GAAG,QAAQ,IAA4C,CAAC,MAC7D;AACH,SAAO,GAAG;AAAA,IACR;AAAA,MACE;AAAA,QACE,UAAU,CAAC,EAAE,MAAM,GAAG,CAAC;AAAA,QACvB,MAAM,SAAQ,oBAAI,KAAK,GAAE,aAAa;AAAA,QACtC,MAAM,OAAO,QAAQ,KAAK,IAAI;AAAA,MAChC;AAAA;AAAA,MAEA;AAAA,QACE,MAAM;AAAA,MACR;AAAA,IACF;AAAA,IACA;AAAA,EACF;AACF;;;ADlBO,IAAM,iBAAiB,kBAAkB;AAAA,EAC9C,KAAKC,MAAK;AAAA,EACV,MAAM;AAAA,IACJ,WAAW;AAAA,IACX,UAAU;AAAA,IACV,cAAc;AAAA,IACd,QAAQ;AAAA,EACV;AACF,CAAC,EAAE,uBAAuB,CAAC,EAAE,OAAO,OAAO;AAAA,EACzC,QAAQ;AAAA,IACN,MAAM,UAAU,YAAY,MAAM;AAAA,EACpC;AACF,EAAE;;;ADZK,IAAM,aAAa,cAAc,cAAc;","names":["KEYS","KEYS"]}