{"version":3,"sources":["../src/index.ts","../src/lib/BaseExcalidrawPlugin.ts","../src/lib/transforms/insertExcalidraw.ts"],"sourcesContent":["/**\n * @file Automatically generated by barrelsby.\n */\n\nexport * from './lib/index';\n","import { type TElement, createSlatePlugin, KEYS } from 'platejs';\n\nimport type { ExcalidrawDataState } from './types';\n\nexport interface TExcalidrawElement extends TElement {\n  data?: {\n    elements: ExcalidrawDataState['elements'];\n    state: ExcalidrawDataState['appState'];\n  } | null;\n}\n\n/** Enables support for Excalidraw drawing tool within a Slate document */\nexport const BaseExcalidrawPlugin = createSlatePlugin({\n  key: KEYS.excalidraw,\n  node: { isElement: true, isVoid: true },\n});\n","import type { InsertNodesOptions, NodeProps, SlateEditor } from 'platejs';\n\nimport { KEYS } from 'platejs';\n\nimport type { TExcalidrawElement } from '../BaseExcalidrawPlugin';\n\nexport const insertExcalidraw = (\n  editor: SlateEditor,\n  props: NodeProps<TExcalidrawElement> = {},\n  options: InsertNodesOptions = {}\n): void => {\n  if (!editor.selection) return;\n\n  const selectionParentEntry = editor.api.parent(editor.selection);\n\n  if (!selectionParentEntry) return;\n\n  const [, path] = selectionParentEntry;\n\n  editor.tf.insertNodes<TExcalidrawElement>(\n    {\n      children: [{ text: '' }],\n      type: editor.getType(KEYS.excalidraw),\n      ...props,\n    },\n    { at: path, nextBlock: true, ...(options as any) }\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAA,qBAAuD;AAYhD,IAAM,2BAAuB,kCAAkB;AAAA,EACpD,KAAK,oBAAK;AAAA,EACV,MAAM,EAAE,WAAW,MAAM,QAAQ,KAAK;AACxC,CAAC;;;ACbD,IAAAA,kBAAqB;AAId,IAAM,mBAAmB,CAC9B,QACA,QAAuC,CAAC,GACxC,UAA8B,CAAC,MACtB;AACT,MAAI,CAAC,OAAO,UAAW;AAEvB,QAAM,uBAAuB,OAAO,IAAI,OAAO,OAAO,SAAS;AAE/D,MAAI,CAAC,qBAAsB;AAE3B,QAAM,CAAC,EAAE,IAAI,IAAI;AAEjB,SAAO,GAAG;AAAA,IACR;AAAA,MACE,UAAU,CAAC,EAAE,MAAM,GAAG,CAAC;AAAA,MACvB,MAAM,OAAO,QAAQ,qBAAK,UAAU;AAAA,MACpC,GAAG;AAAA,IACL;AAAA,IACA,EAAE,IAAI,MAAM,WAAW,MAAM,GAAI,QAAgB;AAAA,EACnD;AACF;","names":["import_platejs"]}